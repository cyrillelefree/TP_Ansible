---
- hosts: node00
  gather_facts: no
  vars:
    admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64626261313737373033383664653733306238626264656261653661653362376566363263313031
          6263666138336536323238643565306234353031336461640a613865643938396631653565616366
          33396164613764376132393764653936383632353162353735353433663266616536393234323038
          6664363365393737350a656138643731656338303136373631656636623964303638343166326130
          6630
    developer_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35326635313262393738383836323539623134343430396630366266393731303232303036303464
          6165366263313864363934613864666238333564626561630a303937653334363135396539333739
          64653035383132623733393434363733316136336431336132346533626636653635383462396539
          3263326230636136350a623063626539323966393233333832643166626439613438363731623935
          6137
  tasks:
    - name: Include user.yml
      include_vars:
        file: data/users.yml
    - name: Creating admins
      user:
        name: "{{ item }}"
        password: "{{ admin_pass | string | password_hash('sha512') }}"
        groups: wheel
      with_items: "{{ admins | list }}"
    - name: creating developers
      user:
        name: "{{ item }}"
        password: "{{ developer_pass | string | password_hash('sha512') }}"
        home: "/var/www"
      with_items: "{{ developers | list }}"

