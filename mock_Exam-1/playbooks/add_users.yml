---
- hosts: node00
  gather_facts: no
  vars:
    admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39613036653461666663333566626166663764333939353830353431636436613939396230646261
          6532626235633166356464303330633966633534633939610a373930363833643664353534663338
          63396435393336323136376332653966313839626162633930323365663538363433346465356235
          3164643165343330320a336237326163376630336132666138306634333164396162653238353535
          3463

    developer_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65353935643134326133303163616539386365333035313939653831373935613563643465623061
          6164326431633362353336343135666331636664346161640a303336626563643765376434356137
          34613961373262356635643566616537666638613730336631626461653333306366356132386261
          6138383065323430390a626338333135316465623539653334643934636634353232323836623663
          3034
  tasks:
  - name: include user.yml
    include_vars:
      file: data/users.yml

  - name: create admins users
    user:
      name: "{{ item }}"
      password: "{{ admin_pass | string | password_hash('sha512') }}"
      groups: wheel
    with_items: "{{ admins | list }}"

  - name: creating developers
    user:
      name: "{{ item }}"
      password: "{{ developer_pass | string | password_hash('sha512') }}"
      home: /var/www
    with_items: "{{ developers | list }}"
